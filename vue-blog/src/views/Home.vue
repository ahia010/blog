<template>
  <n-layout>
    <n-layout content-style="padding:20px 10vw;display:flex;gap:20px">
      <n-grid :x-gap="12">
        <n-grid-item :span="18">
          <n-card>
            <n-list hoverable clickable>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="相见恨晚" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        暑夜
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        晚春
                      </n-tag>
                    </n-space>
                  </template>
                  奋勇呀然后休息呀<br>
                  完成你伟大的人生
                </n-thing>
              </n-list-item>
              <n-list-item>
                <n-thing title="他在时间门外" content-style="margin-top: 10px;">
                  <template #description>
                    <n-space size="small" style="margin-top: 4px">
                      <n-tag :bordered="false" type="info" size="small">
                        环形公路
                      </n-tag>
                      <n-tag :bordered="false" type="info" size="small">
                        潜水艇司机
                      </n-tag>
                    </n-space>
                  </template>
                  最新的打印机<br>
                  复制着彩色傀儡<br>
                  早上好我的罐头先生<br>
                  让他带你去被工厂敲击
                </n-thing>
              </n-list-item>
            </n-list>
          </n-card>
        </n-grid-item>
        <n-grid-item :span="6">
          <n-card>
            <n-flex justify="center">
              <n-image
                  style="margin-bottom: 20px;"
                  width="100"
                  src="https://07akioni.oss-cn-beijing.aliyuncs.com/07akioni.jpeg"
                  preview-disabled
              />
            </n-flex>
            <n-flex justify="space-around">
              <n-flex vertical>
                <n-text>文章数</n-text>
                <n-text>300</n-text>
              </n-flex>
              <n-flex vertical>
                <n-text>更新时间</n-text>
                <n-text>2021-10-10</n-text>
              </n-flex>
              <n-flex vertical>
                <n-text>评论数</n-text>
                <n-text>300</n-text>
              </n-flex>
            </n-flex>
          </n-card>
          <n-card style="margin-top:20px">
            <n-text>浏览排行</n-text>
            <n-list hoverable clickable>

              <n-list-item class="home-top">
                <n-thing title="文章标题" content-style="margin-top: 10px;"  >
                  <div  class="home-top-content">
                    住在我心里孤独的 孤独的海怪 痛苦之王 开始厌倦 深海的光 停滞的海浪住在我心里孤独的 孤独的海怪 痛苦之王
                    开始厌倦 深海的光 停滞的海浪住在我心里孤独的 孤独的海怪 痛苦之王 开始厌倦 深海的光 停滞的海浪住在我心里孤独的
                    孤独的海怪 痛苦之王 开始厌倦 深海的光 停滞的海浪住在我心里孤独的 孤独的海怪 痛苦之王 开始厌倦 深海的光
                    停滞的海浪
                  </div>
                </n-thing>
              </n-list-item>
            </n-list>
          </n-card>
        </n-grid-item>
      </n-grid>
    </n-layout>
  </n-layout>
</template>

<script setup>

import {getCurrentInstance, nextTick, onBeforeUnmount, onMounted, reactive, ref} from "vue";
import {debounce} from "@/utils/debonce.js";


const homeList = reactive([])

const screenWidth = ref(window.innerWidth);

onMounted(()=>{
  const width = document.querySelector('.home-top').clientWidth;
  document.querySelector('.home-top-content').style.maxWidth = `${width-30}px`;
})


const handleResize = debounce(() => {
  screenWidth.value = window.innerWidth;
  console.log(`Screen width changed to: ${screenWidth.value}px`);
  // 这里可以添加其他响应屏幕尺寸变化的逻辑
  const width = document.querySelector('.home-top').clientWidth;
  document.querySelector('.home-top-content').style.maxWidth = `${width-30}px`;

}, 200); // 200毫秒内如果有新的resize事件，之前的调用会被取消，仅执行最后一次

// 在组件挂载时添加监听器
onMounted(() => {
  window.addEventListener('resize', handleResize);
});

// 在组件卸载时移除监听器，避免内存泄漏
onBeforeUnmount(() => {
  window.removeEventListener('resize', handleResize);
});




</script>

<style scoped>

.carousel-img {
  width: 100%;
  height: 400px;
  object-fit: cover;
}
.home-top-content{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
</style>